<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electrical Flow Diagram</title>
    <style>
        :root {
            --electric-blue: #00d4ff;
            --cyan-glow: #00ffff;
            --light-grey: #eaeaea;
            --animation-speed: 1;
        }

        .flow-container {
            font-family: 'Courier New', monospace;
						margin: 0;
            padding: 0;
            box-sizing: border-box;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: var(--light-grey);
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            z-index: 10;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--electric-blue);
        }

        .header p {
            font-size: 1.125rem;
            max-width: 32rem;
            margin: 0 auto;
            color: rgba(234, 234, 234, 0.8);
        }

        .diagram-container {
            position: relative;
            width: 100%;
            max-width: 75rem;
            height: 100vh;
        }

        .glassmorphism {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .svg-pathways {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
        }

        .main-current {
            stroke: var(--electric-blue);
            stroke-width: 3;
            fill: none;
            opacity: 0.8;
        }

        .branch-current {
            stroke: var(--cyan-glow);
            stroke-width: 2;
            fill: none;
            opacity: 0.6;
        }

        .current-particle {
            fill: var(--electric-blue);
            opacity: 0;
            animation: particleFlow calc(3s / var(--animation-speed)) infinite ease-in-out;
        }

        .particle-1 {
            animation-delay: calc(0s / var(--animation-speed));
        }

        .particle-2 {
            animation-delay: calc(0.6s / var(--animation-speed));
        }

        .particle-3 {
            animation-delay: calc(1.2s / var(--animation-speed));
        }

        .particle-4 {
            animation-delay: calc(1.8s / var(--animation-speed));
        }

        .particle-5 {
            animation-delay: calc(2.4s / var(--animation-speed));
        }

        @keyframes particleFlow {
            0% {
                opacity: 0;
                offset-distance: 0%;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                offset-distance: 100%;
            }
        }

        .power-source {
            position: absolute;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            width: 6rem;
            height: 2rem;
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-color: rgba(0, 212, 255, 0.3);
        }

        .power-indicator {
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            background-color: var(--electric-blue);
            animation: pulse 2s infinite;
        }

        .power-label {
            margin-left: 0.5rem;
            font-size: 0.75rem;
            color: var(--electric-blue);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .tech-container {
            position: absolute;
            width: 12rem;
            height: 8rem;
            border-radius: 1rem;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border-color: rgba(255, 255, 255, 0.2);
            z-index: 1;
        }

        .tech-container:hover {
            transform: scale(1.05);
            z-index: 10;
        }

        .container-active {
            border-color: var(--cyan-glow) !important;
        }

        .container-glow {
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }

        .tech-logo {
            width: 3rem;
            height: 3rem;
            margin-bottom: 0.75rem;
            color: var(--electric-blue);
        }

        /* Ensure embedded SVG logos render as flat, single-color icons and scale correctly */
        .tech-logo svg { width: 100%; height: 100%; display: block; }
        .tech-logo svg *,
        .tech-logo svg path,
        .tech-logo svg rect,
        .tech-logo svg g { fill: currentColor !important; stroke: none !important; }
        /* Hide any embedded background square in some vendor SVGs (e.g., OpenAI st15) */
        .tech-logo svg .st15 { display: none !important; }

        .tech-name {
            font-size: 0.875rem;
            color: rgba(234, 234, 234, 0.8);
        }

        .tech-description {
            font-size: 0.75rem;
            margin-top: 0.25rem;
            color: rgba(0, 212, 255, 0.6);
        }

        .control-panel {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 1rem;
            padding: 1rem;
            border-color: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .control-button {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-family: 'Courier New', monospace;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .control-button.active {
            background-color: rgba(0, 212, 255, 0.3);
            color: var(--electric-blue);
        }

        .control-button.inactive {
            background-color: rgba(26, 26, 46, 0.5);
            color: var(--light-grey);
        }

        .control-button:hover {
            opacity: 0.8;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .speed-label {
            font-size: 0.75rem;
            color: rgba(234, 234, 234, 0.6);
        }

        .speed-slider {
            width: 5rem;
            -webkit-appearance: none;
            appearance: none;
            height: 4px;
            border-radius: 2px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
        }

        .speed-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--electric-blue);
            cursor: pointer;
        }

        .speed-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--electric-blue);
            cursor: pointer;
            border: none;
        }

        .speed-value {
            font-size: 0.75rem;
            color: var(--electric-blue);
        }

        /* Position classes */
        .pos-cloud { top: 12rem; left: 6rem; }
        .pos-database { top: 18rem; left: 9rem; }
        .pos-api { top: 18rem; left: 50%; transform: translateX(-50%); }
        .pos-analytics { top: 18rem; right: 9rem; }
        .pos-security { top: 12rem; right: 6rem; }

        /* Responsive design */
        @media (max-width: 768px) {
            .diagram-container {
                height: 80vh;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .tech-container {
                width: 8rem;
                height: 6rem;
                padding: 1rem;
            }
            
            .tech-logo {
                width: 2rem;
                height: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="flow-container">
        <!-- Header Section -->
        <div class="header">
            <h1>Electrical Flow Diagram</h1>
            <p>Interactive visualization of electrical current flowing through branching pathways to illuminate connected systems</p>
        </div>

        <!-- Main Flow Diagram Container -->
        <div class="diagram-container">
            
            <!-- SVG Flow Pathways -->
            <svg class="svg-pathways" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid meet">
                <defs>
                    <linearGradient id="pathGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color: var(--cyan-glow); stop-opacity: 1;" />
                        <stop offset="100%" style="stop-color: var(--electric-blue); stop-opacity: 0.6;" />
                    </linearGradient>
                    
                    <filter id="glow">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                        <feMerge> 
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>

                <!-- Main vertical pathway -->
                <path d="M400 50 L400 150" class="main-current" filter="url(#glow)" />
                
                <!-- Branching pathways -->
                <path d="M400 150 Q400 200 250 250 Q200 280 150 320" class="branch-current" filter="url(#glow)" />
                <path d="M400 150 Q380 200 300 280 Q280 300 250 350" class="branch-current" filter="url(#glow)" />
                <path d="M400 150 Q400 200 400 280 Q400 300 400 350" class="branch-current" filter="url(#glow)" />
                <path d="M400 150 Q420 200 500 280 Q520 300 550 350" class="branch-current" filter="url(#glow)" />
                <path d="M400 150 Q400 200 550 250 Q600 280 650 320" class="branch-current" filter="url(#glow)" />

                <!-- Animated particles -->
                <circle r="4" class="current-particle particle-1">
                    <animateMotion dur="3s" repeatCount="indefinite">
                        <mpath href="#path1"/>
                    </animateMotion>
                </circle>
                <circle r="4" class="current-particle particle-2">
                    <animateMotion dur="3s" repeatCount="indefinite">
                        <mpath href="#path2"/>
                    </animateMotion>
                </circle>
                <circle r="4" class="current-particle particle-3">
                    <animateMotion dur="3s" repeatCount="indefinite">
                        <mpath href="#path3"/>
                    </animateMotion>
                </circle>
                <circle r="4" class="current-particle particle-4">
                    <animateMotion dur="3s" repeatCount="indefinite">
                        <mpath href="#path4"/>
                    </animateMotion>
                </circle>
                <circle r="4" class="current-particle particle-5">
                    <animateMotion dur="3s" repeatCount="indefinite">
                        <mpath href="#path5"/>
                    </animateMotion>
                </circle>

                <!-- Hidden paths for particle animation -->
                <path id="path1" d="M400 50 L400 150 Q400 200 250 250 Q200 280 150 320" style="display: none;" />
                <path id="path2" d="M400 50 L400 150 Q380 200 300 280 Q280 300 250 350" style="display: none;" />
                <path id="path3" d="M400 50 L400 150 Q400 200 400 280 Q400 300 400 350" style="display: none;" />
                <path id="path4" d="M400 50 L400 150 Q420 200 500 280 Q520 300 550 350" style="display: none;" />
                <path id="path5" d="M400 50 L400 150 Q400 200 550 250 Q600 280 650 320" style="display: none;" />
            </svg>

            <!-- Source Power Container -->
            <div class="power-source glassmorphism">
                <div class="power-indicator"></div>
                <span class="power-label">PWR</span>
            </div>

            <!-- Tech Containers -->
            <div class="tech-container glassmorphism pos-cloud" data-index="0">
                <div class="tech-logo">
                    <!-- OpenAI symbol -->
                    <svg viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg" aria-label="OpenAI">
                        <g id="图层_1">
                            <path class="st15" d="M24.51,28.51H5.49c-2.21,0-4-1.79-4-4V5.49c0-2.21,1.79-4,4-4h19.03c2.21,0,4,1.79,4,4v19.03
                                C28.51,26.72,26.72,28.51,24.51,28.51z"/>
                            <g>
                                <g>
                                    <g>
                                        <g>
                                            <path d="M15.47,7.1l-1.3,1.85c-0.2,0.29-0.54,0.47-0.9,0.47h-7.1V7.09C6.16,7.1,15.47,7.1,15.47,7.1z"/>
                                            <polygon points="24.3,7.1 13.14,22.91 5.7,22.91 16.86,7.1"/>
                                            <path d="M14.53,22.91l1.31-1.86c0.2-0.29,0.54-0.47,0.9-0.47h7.09v2.33H14.53z"/>
                                        </g>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </svg>
                </div>
                <span class="tech-name">Cloud</span>
                <span class="tech-description">Infrastructure</span>
            </div>

            <div class="tech-container glassmorphism pos-database" data-index="1">
                <div class="tech-logo">
                    <!-- Qwen logo -->
                    <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-label="Qwen">
                        <path d="M174.82 108.75L155.38 75L165.64 57.75C166.46 56.31 166.46 54.53 165.64 53.09L155.38 35.84C154.86 34.91 153.87 34.33 152.78 34.33H114.88L106.14 19.03C105.62 18.1 104.63 17.52 103.54 17.52H83.3C82.21 17.52 81.22 18.1 80.7 19.03L61.26 52.77H41.02C39.93 52.77 38.94 53.35 38.42 54.28L28.16 71.53C27.34 72.97 27.34 74.75 28.16 76.19L45.52 107.5L36.78 122.8C35.96 124.24 35.96 126.02 36.78 127.46L47.04 144.71C47.56 145.64 48.55 146.22 49.64 146.22H87.54L96.28 161.52C96.8 162.45 97.79 163.03 98.88 163.03H119.12C120.21 163.03 121.2 162.45 121.72 161.52L141.16 127.78H158.52C159.61 127.78 160.6 127.2 161.12 126.27L171.38 109.02C172.2 107.58 172.2 105.8 171.38 104.36L174.82 108.75Z"/>
                        <path d="M119.12 163.03H98.88L87.54 144.71H49.64L61.26 126.39H80.7L38.42 55.29H61.26L83.3 19.03L93.56 37.35L83.3 55.29H161.58L151.32 72.54L170.76 106.28H151.32L141.16 88.34L101.18 163.03H119.12Z"/>
                        <path d="M127.86 79.83H76.14L101.18 122.11L127.86 79.83Z"/>
                    </svg>
                </div>
                <span class="tech-name">Database</span>
                <span class="tech-description">Storage</span>
            </div>

            <div class="tech-container glassmorphism pos-api" data-index="2">
                <div class="tech-logo">
                    <!-- Mistral logo -->
                    <svg viewBox="0 0 158.7128 157.296" xmlns="http://www.w3.org/2000/svg" aria-label="Mistral">
                        <path d="M60.8734,57.2556v-14.9432c0-1.2586.4722-2.2029,1.5728-2.8314l30.0443-17.3023c4.0899-2.3593,8.9662-3.4599,13.9988-3.4599,18.8759,0,30.8307,14.6289,30.8307,30.2006,0,1.1007,0,2.3593-.158,3.6178l-31.1446-18.2467c-1.8872-1.1006-3.7754-1.1006-5.6629,0l-39.4812,22.9651ZM131.0276,115.4561v-35.7074c0-2.2028-.9446-3.7756-2.8318-4.8763l-39.481-22.9651,12.8982-7.3934c1.1007-.6285,2.0453-.6285,3.1458,0l30.0441,17.3024c8.6523,5.0341,14.4708,15.7296,14.4708,26.1107,0,11.9539-7.0769,22.965-18.2461,27.527v.0021ZM51.593,83.9964l-12.8982-7.5497c-1.1007-.6285-1.5728-1.5728-1.5728-2.8314v-34.6048c0-16.8303,12.8982-29.5722,30.3585-29.5722,6.607,0,12.7403,2.2029,17.9324,6.1349l-30.987,17.9324c-1.8871,1.1007-2.8314,2.6735-2.8314,4.8764v45.6159l-.0014-.0015ZM79.3562,100.0403l-18.4829-10.3811v-22.0209l18.4829-10.3811,18.4812,10.3811v22.0209l-18.4812,10.3811ZM91.2319,147.8591c-6.607,0-12.7403-2.2031-17.9324-6.1344l30.9866-17.9333c1.8872-1.1005,2.8318-2.6728,2.8318-4.8759v-45.616l13.0564,7.5498c1.1005.6285,1.5723,1.5728,1.5723,2.8314v34.6051c0,16.8297-13.0564,29.5723-30.5147,29.5723v.001ZM53.9522,112.7822l-30.0443-17.3024c-8.652-5.0343-14.471-15.7296-14.471-26.1107,0-12.1119,7.2356-22.9652,18.403-27.5272v35.8634c0,2.2028.9443,3.7756,2.8314,4.8763l39.3248,22.8068-12.8982,7.3938c-1.1007.6287-2.045.6287-3.1456,0ZM52.2229,138.5791c-17.7745,0-30.8306-13.3713-30.8306-29.8871,0-1.2585.1578-2.5169.3143-3.7754l30.987,17.9323c1.8871,1.1005,3.7757,1.1005,5.6628,0l39.4811-22.807v14.9435c0,1.2585-.4721,2.2021-1.5728,2.8308l-30.0443,17.3025c-4.0898,2.359-8.9662,3.4605-13.9989,3.4605h.0014ZM91.2319,157.296c19.0327,0,34.9188-13.5272,38.5383-31.4594,17.6164-4.562,28.9425-21.0779,28.9425-37.908,0-11.0112-4.719-21.7066-13.2133-29.4143.7867-3.3035,1.2595-6.607,1.2595-9.909,0-22.4929-18.2471-39.3247-39.3251-39.3247-4.2461,0-8.3363.6285-12.4262,2.045-7.0792-6.9213-16.8318-11.3254-27.5271-11.3254-19.0331,0-34.9191,13.5268-38.5384,31.4591C11.3255,36.0212,0,52.5373,0,69.3675c0,11.0112,4.7184,21.7065,13.2125,29.4142-.7865,3.3035-1.2586,6.6067-1.2586,9.9092,0,22.4923,18.2466,39.3241,39.3248,39.3241,4.2462,0,8.3362-.6277,12.426-2.0441,7.0776,6.921,16.8302,11.3251,27.5271,11.3251Z"/>
                    </svg>
                </div>
                <span class="tech-name">API</span>
                <span class="tech-description">Gateway</span>
            </div>

            <div class="tech-container glassmorphism pos-analytics" data-index="3">
                <div class="tech-logo">
                    <!-- GLM logo -->
                    <svg viewBox="0 0 129 91" xmlns="http://www.w3.org/2000/svg" aria-label="GLM">
                        <g>
                            <rect x="18.292" y="0" width="18.293" height="18.123"/>
                            <rect x="91.473" y="0" width="18.293" height="18.123"/>
                            <rect x="18.292" y="18.121" width="36.586" height="18.123"/>
                            <rect x="73.181" y="18.121" width="36.586" height="18.123"/>
                            <rect x="18.292" y="36.243" width="91.476" height="18.122"/>
                            <rect x="18.292" y="54.37" width="18.293" height="18.123"/>
                            <rect x="54.883" y="54.37" width="18.293" height="18.123"/>
                            <rect x="91.473" y="54.37" width="18.293" height="18.123"/>
                            <rect x="0" y="72.504" width="54.89" height="18.123"/>
                            <rect x="73.181" y="72.504" width="54.89" height="18.123"/>
                        </g>
                    </svg>
                </div>
                <span class="tech-name">Analytics</span>
                <span class="tech-description">Insights</span>
            </div>

            <div class="tech-container glassmorphism pos-security" data-index="4">
                <div class="tech-logo">
                    <!-- Meta logo -->
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-label="Meta">
                        <path d="M6.897 4h-.024l-.031 2.615h.022c1.715 0 3.046 1.357 5.94 6.246l.175.297.012.02 1.62-2.438-.012-.019a48.763 48.763 0 00-1.098-1.716 28.01 28.01 0 00-1.175-1.629C10.413 4.932 8.812 4 6.896 4z"></path>
                        <path d="M6.873 4C4.95 4.01 3.247 5.258 2.02 7.17a4.352 4.352 0 00-.01.017l2.254 1.231.011-.017c.718-1.083 1.61-1.774 2.568-1.785h.021L6.896 4h-.023z"></path>
                        <path d="M2.019 7.17l-.011.017C1.2 8.447.598 9.995.274 11.664l-.005.022 2.534.6.004-.022c.27-1.467.786-2.828 1.456-3.845l.011-.017L2.02 7.17z"></path>
                        <path d="M2.807 12.264l-2.533-.6-.005.022c-.177.918-.267 1.851-.269 2.786v.023l2.598.233v-.023a12.591 12.591 0 01.21-2.44z"></path>
                        <path d="M2.677 15.537a5.462 5.462 0 01-.079-.813v-.022L0 14.468v.024a8.89 8.89 0 00.146 1.652l2.535-.585a4.106 4.106 0 01-.004-.022z"></path>
                        <path d="M3.27 16.89c-.284-.31-.484-.756-.589-1.328l-.004-.021-2.535.585.004.021c.192 1.01.568 1.85 1.106 2.487l.014.017 2.018-1.745a2.106 2.106 0 01-.015-.016z"></path>
                        <path d="M10.78 9.654c-1.528 2.35-2.454 3.825-2.454 3.825-2.035 3.2-2.739 3.917-3.871 3.917a1.545 1.545 0 01-1.186-.508l-2.017 1.744.014.017C2.01 19.518 3.058 20 4.356 20c1.963 0 3.374-.928 5.884-5.33l1.766-3.13a41.283 41.283 0 00-1.227-1.886z"></path>
                        <path d="M13.502 5.946l-.016.016c-.4.43-.786.908-1.16 1.416.378.483.768 1.024 1.175 1.63.48-.743.928-1.345 1.367-1.807l.016-.016-1.382-1.24z"></path>
                        <path d="M20.918 5.713C19.853 4.633 18.583 4 17.225 4c-1.432 0-2.637.787-3.723 1.944l-.016.016 1.382 1.24.016-.017c.715-.747 1.408-1.12 2.176-1.12.826 0 1.6.39 2.27 1.075l.015.016 1.589-1.425-.016-.016z"></path>
                        <path d="M23.998 14.125c-.06-3.467-1.27-6.566-3.064-8.396l-.016-.016-1.588 1.424.015.016c1.35 1.392 2.277 3.98 2.361 6.971v.023h2.292v-.022z"></path>
                        <path d="M23.998 14.15v-.023h-2.292v.022c.004.14.006.282.006.424 0 .815-.121 1.474-.368 1.95l-.011.022 1.708 1.782.013-.02c.62-.96.946-2.293.946-3.91 0-.083 0-.165-.002-.247z"></path>
                        <path d="M21.344 16.52l-.011.02c-.214.402-.519.67-.917.787l.778 2.462a3.493 3.493 0 00.438-.182 3.558 3.558 0 001.366-1.218l.044-.065.012-.02-1.71-1.784z"></path>
                        <path d="M19.92 17.393c-.262 0-.492-.039-.718-.14l-.798 2.522c.449.153.927.222 1.46.222.492 0 .943-.073 1.352-.215l-.78-2.462c-.167.05-.341.075-.517.073z"></path>
                        <path d="M18.323 16.534l-.014-.017-1.836 1.914.016.017c.637.682 1.246 1.105 1.937 1.337l.797-2.52c-.291-.125-.573-.353-.9-.731z"></path>
                        <path d="M18.309 16.515c-.55-.642-1.232-1.712-2.303-3.44l-1.396-2.336-.011-.02-1.62 2.438.012.02.989 1.668c.959 1.61 1.74 2.774 2.493 3.585l.016.016 1.834-1.914a2.353 2.353 0 01-.014-.017z"></path>
                    </svg>
                </div>
                <span class="tech-name">Security</span>
                <span class="tech-description">Protection</span>
            </div>

            <!-- Control Panel -->
            <div class="control-panel glassmorphism">
                <button id="playBtn" class="control-button active">Play</button>
                <button id="pauseBtn" class="control-button inactive">Pause</button>
                <div class="speed-control">
                    <label class="speed-label">Speed:</label>
                    <input type="range" id="speedSlider" class="speed-slider" min="0.5" max="3" step="0.1" value="1">
                    <span id="speedValue" class="speed-value">1.0x</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        class ElectricalFlowDiagram {
            constructor() {
                this.animationSpeed = 1;
                this.isPlaying = true;
                this.currentContainer = 0;
                this.intervalId = null;
                this.totalContainers = 5;
                
                this.init();
            }

            init() {
                this.bindEvents();
                this.startCycle();
                this.updateActiveContainer();
            }

            bindEvents() {
                // Play/Pause buttons
                document.getElementById('playBtn').addEventListener('click', () => this.handlePlay());
                document.getElementById('pauseBtn').addEventListener('click', () => this.handlePause());
                
                // Speed slider
                const speedSlider = document.getElementById('speedSlider');
                speedSlider.addEventListener('input', (e) => this.handleSpeedChange(parseFloat(e.target.value)));
                
                // Tech container clicks
                document.querySelectorAll('.tech-container').forEach(container => {
                    container.addEventListener('click', (e) => {
                        const index = parseInt(e.currentTarget.getAttribute('data-index'));
                        this.handleContainerClick(index);
                    });
                });
            }

            cycleContainers() {
                this.currentContainer = (this.currentContainer + 1) % this.totalContainers;
                this.updateActiveContainer();
            }

            startCycle() {
                if (this.intervalId) clearInterval(this.intervalId);
                const interval = 3000 / this.animationSpeed;
                this.intervalId = setInterval(() => this.cycleContainers(), interval);
            }

            handlePlay() {
                this.isPlaying = true;
                this.updateButtonStates();
                this.startCycle();
            }

            handlePause() {
                this.isPlaying = false;
                this.updateButtonStates();
                if (this.intervalId) {
                    clearInterval(this.intervalId);
                    this.intervalId = null;
                }
            }

            handleSpeedChange(speed) {
                this.animationSpeed = speed;
                
                // Update CSS custom property
                document.documentElement.style.setProperty('--animation-speed', speed.toString());
                
                // Update speed value display
                document.getElementById('speedValue').textContent = speed.toFixed(1) + 'x';
                
                // Update particle animation durations
                this.updateParticleAnimations();
                
                if (this.isPlaying) {
                    this.startCycle();
                }
            }

            handleContainerClick(index) {
                this.currentContainer = index;
                this.updateActiveContainer();
            }

            updateButtonStates() {
                const playBtn = document.getElementById('playBtn');
                const pauseBtn = document.getElementById('pauseBtn');
                
                if (this.isPlaying) {
                    playBtn.classList.add('active');
                    playBtn.classList.remove('inactive');
                    pauseBtn.classList.add('inactive');
                    pauseBtn.classList.remove('active');
                } else {
                    playBtn.classList.add('inactive');
                    playBtn.classList.remove('active');
                    pauseBtn.classList.add('active');
                    pauseBtn.classList.remove('inactive');
                }
            }

            updateActiveContainer() {
                document.querySelectorAll('.tech-container').forEach((container, index) => {
                    if (index === this.currentContainer) {
                        container.classList.add('container-active', 'container-glow');
                    } else {
                        container.classList.remove('container-active', 'container-glow');
                    }
                });
            }

            updateParticleAnimations() {
                const particles = document.querySelectorAll('.current-particle');
                particles.forEach((particle, index) => {
                    const animateMotion = particle.querySelector('animateMotion');
                    if (animateMotion) {
                        const duration = (3 / this.animationSpeed).toFixed(1) + 's';
                        animateMotion.setAttribute('dur', duration);
                    }
                });
            }
        }

        // Initialize the diagram when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new ElectricalFlowDiagram();
        });
    </script>
</body>
</html>